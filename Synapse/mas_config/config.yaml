# WARNING: This file is autogenerated by element-quick-start from templates

http:
  listeners:
  - name: web
    resources:
    - name: discovery
    - name: human
    - name: oauth
    - name: compat
    - name: graphql
    - name: assets
    binds:
    - address: '[::]:8080'
    proxy_protocol: false
  - name: internal
    resources:
    - name: health
    binds:
    - host: localhost
      port: 8081
    proxy_protocol: false
  trusted_proxies:
  - 192.168.0.0/16
  - 172.16.0.0/12
  - 10.0.0.0/10
  - 127.0.0.1/8
  - fd00::/8
  - ::1/128
  public_base: https://auth.example.com       #####此处更改为你的
  issuer: https://auth.example.com/           #####此处更改为你的
database:
  host: mas-db
  database: mas
  username: synapse_user
  password: your_password
  max_connections: 10
  min_connections: 0
  connect_timeout: 30
  idle_timeout: 600
  max_lifetime: 1800
email:
  from: '"Matrix Authentication Service" <matrix.aosn@gmail.com>'
  reply_to: '"Matrix Authentication Service" <matrix.aosn@gmail.com>'
  transport: smtp
  mode: starttls  
  hostname: smtp.gmail.com
  port: 587
  username: matrix.aosn@gmail.com
  password: cqkrdkagdwavswho
secrets:
  encryption: 31c7bb74d8c48b5b5737a1a7b8c45e37cd7aa619c1edc75a280be7b6bd59b195
  keys:
    - kid: omwkf1wQns
      key: |
        -----BEGIN RSA PRIVATE KEY-----
        MIIEpQIBAAKCAQEA4lpUqSm2mYIhR/zpuwCgaS0rjXO60wzzNwF66Tyb5+C+IdgM
        kmUJtY1xK70Ny+pBItuD0COvCQyrn3EkeVxxIp8MPKWEeHQb2byGngSMJUIFG+gl
        jN0JxR3MaP6nfjYJswv7y28JyVNE7G6gQ9ISy0l/PBKoRHBxu3aFDPi6iPRgc6aE
        v1FOk7Y3+tsPl/9NbUO55nukQeRdE7HKQYwkDvv4ABccF43p4MH19Kz74R476z63
        Dg+7nQVRzUjqXyEYWRKgYEqix+bICCZ5cVuHkT176hulWBho72aLD0vstKB+ejZK
        nWPHkO8ug116xPXI2YcEd1eUzRvHQS5LNipgUwIDAQABAoIBAQCMhaO1eU4BMwZS
        WLMKAzOS2BYHtOcxCwMbDPIvRg9L/vxKqoPzhoJmka7GhpHAHGffqgPE/cI2jgUl
        8OnB5h/ebHr+U4tP9FUt8ZppE02l+7yMPKzDLJ5aH0u9iwqUkhunajMhcofS0r0h
        QvR/5jUAu1ogAz0vb9dLmCK1kNzNFC6ukNg2+Q/YAHLgiGUITsJwgFmonPaDn0n8
        KEsX5ytxlNp9erMOBZWnl0tmnvQZv5I98IU8i3J290r7YUPz1wfRnqmKLEjq1+b6
        bxP5G/rPkmAAC814h9d1B+BBp8g5U4ABJU9cBIwo/oMzhHtqV5BcNFuotg4WtIGm
        bVJqlqABAoGBAPYnBMOapKMq8nYu1XEllHJuvFtE8apKQQ5pw45Xw6xJSEXPUobw
        8+NGuFYf8b1Nnd5xXZJpnnqevL5zjy1NEojSD3BXpZafwDsNyEGNtXmqDnz2//UP
        ai+GMdsZ/e/8lvpFWqTHRHzCC+D0nllBSlyKEyHgTz+L8BnG0Jlj45gBAoGBAOto
        iLHHdJbdeyp6hM9bc9xrwSe7lZWkftc+TxYsCYHMEVJpAv8uOUFmcvXU8XChss13
        Ppxsqj3E5rI3GtrZr6ck0KekIs6TSYK7fApO5C7Te1wBy446oNwk4/bcRkLhnfax
        e8QHtFnJRWhzJsfsH++DtdO74X5C+p9NZYd9IBhTAoGAfKTxcqNCLyW2NUYt6uee
        rfuJAaZ9wT9shgHkdpXWjc1l/YOoRJCKz1GmUmZGoRdGk7dQLK2zBGCRLteRbt0S
        P5ovGzImtYkbbEvkVd2OQZdtUrY4kj1GBd6sLEiTIA0F3qFz7vDAq3QPU9BKxuOa
        5hU87vCI8KLJ6COWybWdMAECgYEAh0GloLfgJjqVZN/GZTm/hTsoXQLrvHIqKtPz
        LuMYh0pP/ZC2lxXg8dHCZbr3CmbtzB4ijE/nNNxoTKdat7nxsdB2TowBL73ys7mz
        WFzhwIHkVAX4Bf1rpXFQxerkN9NYJoDtgsGGfzwktBHNi3sBEmYT19cQhbJIO7WF
        i2Z6RV8CgYEAtWHh4cXB0r2gQhje9UVUEFtakSwpVWQNEvttuZK4ZGL/D5IjyBUO
        WGFJ5MtjRUBCcpxLiHxLSBjwysDvNtdnMAKS2BKQhDui+FiVbd4uxnZ5qrJkkojd
        1+MO6NGuv7XexzssjGBPSBGePFB+pp4AlJ+64xZHIyDO51SdicttxyQ=
        -----END RSA PRIVATE KEY-----
    - kid: IfLNuOQDMO
      key: |
        -----BEGIN EC PRIVATE KEY-----
        MHcCAQEEIIBVBKLv+uh6r5Fr80rV8GEcUg7Bl/G0/s6veTuWxuFdoAoGCCqGSM49
        AwEHoUQDQgAE/TF0aNhkIVpENMEfMuFcLihB9xO+RuPAVJUyWW30LPQ4BvRHf3YT
        iO40J+qsfU6QEJ1uyEJDFW1oLVlT4nk+VQ==
        -----END EC PRIVATE KEY-----
    - kid: NU87TvGLgE
      key: |
        -----BEGIN EC PRIVATE KEY-----
        MIGkAgEBBDB24HpDiNNxMjo6TfshHn8gxfe9tnXzbL9qPM2hblXICmc6HAAjMrB3
        QCySZSxul3ugBwYFK4EEACKhZANiAAQqhny+6jlSVbt8CfpMLfqG3JyaCcoiPocF
        dNXNvZ9pbr6YID6zPigO2uulUp1ED4+ETrzMe/+/Cgvazyn2Q9p41k0ltRMzQpRy
        FnEZadIPl58PZaaGtAIwVCPvSrfq/OU=
        -----END EC PRIVATE KEY-----
    - kid: oFudST5QcJ
      key: |
        -----BEGIN EC PRIVATE KEY-----
        MHQCAQEEILNzcLN0AHtUIYEPA+BhPetpd01NSEEZIm35eVfbESdFoAcGBSuBBAAK
        oUQDQgAER/J1yf/WDF8NOBjd/7j6ZJlH1enS8zo4AxojTTTbCxMiOpi2vcR02Tz3
        k4Wgzdiqd6MC63/qlxDK7/j4GPq5xw==
        -----END EC PRIVATE KEY-----
passwords:
  enabled: true
  schemes:
  - version: 1
    algorithm: argon2id
  minimum_complexity: 3
matrix:
  homeserver: example.com     #  ##此处更改为你的synapse服务域名
  secret: 'n2vHYeTYrGMPY0d96Nh0ALEuu5nqBZ4y'
  endpoint: https://example.com/       #  ##此处更改为你的synapse服务域名     

# please keep config above this point as close as possible to the original generated config
# so that upstream generated config changes can be detected

# these taken from midhun's quick-mas-setup
clients:
  - client_id: 0000000000007777000SYNAPSE      ##此处更改为你的可以随机生成token 注意与home文件中配置相同
    client_auth_method: client_secret_basic    #  此处更改为你的可以随机生成token 注意与home文件中配置相同
    client_secret: 'kMKhpWW5evSedXz1777777'    #  此处更改为你的可以随机生成token 注意与home文件中配置相同

templates:
  path: /usr/local/share/mas-cli/templates/
  assets_manifest: /usr/local/share/mas-cli/manifest.json
  translations_path: /usr/local/share/mas-cli/translations/

policy:
  wasm_module: /usr/local/share/mas-cli/policy.wasm
  client_registration_entrypoint: client_registration/violation
  register_entrypoint: register/violation
  authorization_grant_entrypoint: authorization_grant/violation
  password_entrypoint: password/violation
  email_entrypoint: email/violation
  data:
    client_registration:
      allow_insecure_uris: true # allow non-SSL and localhost URIs
      allow_missing_contacts: true # EW doesn't have contacts at this time
    admin_users:
        - admin


account:
  password_registration_enabled: true   #false注册关闭 true注册开启
  displayname_change_allowed: true
  password_change_allowed: true
  password_recovery_enabled: true

branding:
  service_name: null
  policy_uri: null
  tos_uri: null
  imprint: null
  logo_uri: null


###################################以下是Google单点登录 不想要可以删除
upstream_oauth2:
  providers:
    - id: you_token  #####此处更改为你的google
      issuer: "https://accounts.google.com"
      human_name: "Google"
      brand_name: "google"
      client_id: "452973640322-t6nreta7ja7l2n7gvik22gn3k71vdkpm.apps.googleusercontent.com"  #####此处更改为你的id
      client_secret: "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"                                  #####此处更改为你的密钥
      token_endpoint_auth_method: "client_secret_post"  #  "client_secret_basic,client_secret_post"
      scope: "openid email profile"
      discovery_mode: "oidc"
      claims_imports:
        subject:
          template: "{{ user.sub }}"
        localpart:
          action: force
          template: "{{ user.email | to_localpart }}"
        displayname:
          action: suggest
          template: "{{ user.name }}"
        email:
          action: suggest
          template: "{{ user.email }}"
          set_email_verification: import
######################################

experimental:
  access_token_ttl: 86400
  compat_token_ttl: 86400
